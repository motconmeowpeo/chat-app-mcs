<div id="container" *ngIf="user$|async as user">
    <aside>
        <header>
            <input type="text" placeholder="search">
        </header>
        <ul *ngIf="users$ |async as users">
            <ng-container *ngFor="let item of users">
                <li *ngIf="item.id !==user.id" (click)="findChat(user.id,item)">
                    <img [src]="'https://storage.googleapis.com/portfolio-403709.appspot.com/'+item.avatar" alt="">
                    <div>
                        <h2>{{item.username}}</h2>
                        <h3>
                            <span class="status orange"></span>
                            offline
                        </h3>
                    </div>
                </li>
            </ng-container>



            <!-- <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_02.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_03.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status orange"></span>
                        offline
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_04.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_05.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status orange"></span>
                        offline
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_06.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_07.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_08.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_09.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status green"></span>
                        online
                    </h3>
                </div>
            </li>
            <li>
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_10.jpg" alt="">
                <div>
                    <h2>Prénom Nom</h2>
                    <h3>
                        <span class="status orange"></span>
                        offline
                    </h3>
                </div>
            </li> -->
        </ul>
    </aside>
    <main *ngIf="received">
        <header>
            <img style="width: 55px;height: 55px; object-fit: cover;"
                [src]="'https://storage.googleapis.com/portfolio-403709.appspot.com/'+received.avatar" alt="">
            <!-- <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/chat_avatar_01.jpg" alt=""> -->
            <div>
                <h2>Chat with {{received?.username}}</h2>
            </div>
        </header>
        <ul #scrollMe id="chat" *ngIf="messages$|async as messages">
            <ng-container *ngFor=" let item of messages">

                <li class="you" *ngIf="(user$|async)?.id !==item.author.id">
                    <div class="entete">
                        <span class="status green"></span>
                        <h2>{{item.author.username}}&nbsp;</h2>
                        <h3>&nbsp; {{formatDate(item.createAt)}}</h3>
                    </div>
                    <div class="triangle"></div>
                    <div class="message">
                        {{item.content}} </div>
                </li>

                <li class="me" *ngIf="(user$|async)?.id===item.author.id">
                    <div class="entete">
                        <h2>{{item.author.username}}&nbsp;</h2>
                        <h3>&nbsp;{{formatDate(item.createAt)}}</h3>
                        <span class="status blue"></span>
                    </div>
                    <div class="triangle"></div>
                    <div class="message">
                        {{item.content}}
                    </div>
                </li>
            </ng-container>
        </ul>
        <footer>
            <textarea #input placeholder="Type your message"></textarea>
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_picture.png" alt="">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_file.png" alt="">
            <a (click)="addNewMessage(input,user.id)">Send</a>
        </footer>
    </main>
</div>